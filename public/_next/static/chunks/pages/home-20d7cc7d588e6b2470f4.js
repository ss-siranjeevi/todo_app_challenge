(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[229],{5223:function(e,n,t){"use strict";t.d(n,{$:function(){return i}});var r=t(4799),i={signin:function(e,n,t,i){r.Z.auth().signInWithEmailAndPassword(e,n).then((function(e){return t(e)})).catch((function(e){return i&&i(e)}))},signout:function(e,n){r.Z.auth().signOut().then((function(){e("SUCCESS")})).catch((function(e){n&&n(e)}))}}},7553:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return S}});var r=t(5893),i=t(1163),c=t(7294),o=(t(1560),t(1169),t(1497),t(8697),t(2014)),s=t(5223),u=function(){var e=(0,c.useState)(!1),n=e[0],t=e[1],u=(0,i.useRouter)(),l=function(){s.$.signout((function(e){window&&window.localStorage.clear(),u.push("/")}),(function(e){console.log(e)}))};return(0,r.jsxs)("div",{children:[(0,r.jsx)(o.PY,{children:(0,r.jsxs)(o.Xv,{children:[(0,r.jsx)(o.rO,{children:(0,r.jsx)(o.Lw,{children:"Todo App"})}),(0,r.jsxs)(o.rO,{alignEnd:!0,children:[(0,r.jsx)(o.xc,{icon:"S",onClick:function(){return t(!n)}}),n&&(0,r.jsx)(o.Wo,{children:(0,r.jsx)(o.v2,{open:!0,onClose:function(){return t(!n)},children:(0,r.jsx)(o.sN,{onClick:function(){l()},children:"Logout"})})})]})]})}),(0,r.jsx)(o.Jl,{})]})},l=function(e){var n=e.children;return(0,r.jsx)(c.Fragment,{children:(0,r.jsxs)("div",{style:{width:"100vw",height:"100vh"},children:[(0,r.jsx)(u,{}),n]})})},a=t(6265),d=t(809),f=t.n(d),h=t(2447);function j(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function x(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?j(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var p=t(4799).Z.firestore(),v=function(e){return new Promise((function(n,t){p.collection("todos").add(e).then((function(){n("SUCCESS")})).catch((function(e){console.log(e),n("FAILED")}))}))},w=function(){return new Promise((function(e,n){p.collection("todos").get().then((function(n){var t=[];n.forEach((function(e){var n=x(x({},e.data()),{},{id:e.id});t.push(n)})),e(t)}))}))},g=function(e){return new Promise((function(n,t){p.collection("todos").doc(e).delete().then((function(){n("SUCCESS")})).catch((function(e){console.log(e),n("FAILED")}))}))},y=function(e,n){return new Promise((function(t,r){p.collection("todos").doc(n).set(e).then((function(){t("SUCCESS")})).catch((function(e){console.log(e),t("FAILED")}))}))};function O(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?O(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var m=function(e){var n=e.userId,t=(0,c.useState)([]),i=t[0],s=t[1];(0,c.useEffect)((function(){n&&u()}),[n]);var u=function(){var e=(0,h.Z)(f().mark((function e(){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:n=e.t0,s(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=(0,c.useState)({title:"",isComplete:!1,createdAt:new Date,owner:""}),d=l[0],j=l[1],x=(0,c.useMemo)((function(){return i.sort((function(e,n){var t=e.createdAt,r=n.createdAt;return t<r?-1:t>r?1:0}))}),[i]),p=function(){var e=(0,h.Z)(f().mark((function e(){var t;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===d||void 0===d||!d.title){e.next=9;break}return(t=d).createdAt=new Date,t.owner=n||"",e.next=6,v(t);case 6:"SUCCESS"===e.sent?u():console.log("ADD_ITEM_FAILED"),j({title:"",isComplete:!1,createdAt:new Date,owner:""});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=(0,h.Z)(f().mark((function e(n,t){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n&&n.title&&n.id)){e.next=10;break}if(r=n.id,delete n.id,n.isComplete=t,!r){e.next=10;break}return e.next=8,y(n,r);case 8:"SUCCESS"===e.sent&&u();case 10:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),m=function(){var e=(0,h.Z)(f().mark((function e(n){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n&&n.title&&n.id)){e.next=5;break}return e.next=3,g(n.id);case 3:"SUCCESS"===e.sent&&u();case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,r.jsxs)(c.Fragment,{children:[(0,r.jsx)(o.rj,{children:(0,r.jsx)(o.Jn,{style:{width:"75%",marginLeft:"9vw",marginTop:"5vh",display:"flex",alignItems:"center",justifyContent:"space-between"},children:(0,r.jsx)(o.r8,{span:11,children:(0,r.jsx)(o.ZT,{use:"headline6",children:"List:"})})})}),(0,r.jsx)("div",{style:{width:"75%",marginLeft:"10vw"},children:(0,r.jsx)(o.wQ,{style:{width:"100%"},children:(0,r.jsxs)(o.MC,{children:[(0,r.jsx)(o.mB,{children:(0,r.jsxs)(o.Uk,{children:[(0,r.jsx)(o.dV,{style:{width:"60%"},children:(0,r.jsx)(o.ZT,{use:"headline6",children:"Title"})}),(0,r.jsx)(o.dV,{style:{width:"20%",textAlign:"center"},children:(0,r.jsx)(o.ZT,{use:"headline6",children:"Completed"})}),(0,r.jsx)(o.dV,{style:{width:"20%",textAlign:"center"},children:(0,r.jsx)(o.ZT,{use:"headline6",children:"Action"})})]})}),(0,r.jsx)(o.c4,{children:x.map((function(e,n){return(0,r.jsxs)(o.Uk,{children:[(0,r.jsx)(o.Wv,{children:e.title}),(0,r.jsx)(o.Wv,{style:{textAlign:"center"},children:(0,r.jsx)(o.XZ,{checked:e.isComplete||!1,onChange:function(n){return O(e,n.target.checked)}})}),(0,r.jsx)(o.Wv,{style:{textAlign:"center"},children:(0,r.jsx)(o.zx,{raised:!0,onClick:function(){return m(e)},children:"Delete"})})]},n)}))}),(0,r.jsx)(o.c4,{children:(0,r.jsxs)(o.Uk,{children:[(0,r.jsx)(o.Wv,{children:(0,r.jsx)(o.nv,{outlined:!0,value:(null===d||void 0===d?void 0:d.title)||"",onChange:function(e){return n=e.target.value,void j((function(e){return b(b({},e),{},(0,a.Z)({},"title",n))}));var n},style:{width:"100%",height:"35px"}})}),(0,r.jsx)(o.Wv,{style:{textAlign:"center"},children:(0,r.jsx)(o.XZ,{checked:(null===d||void 0===d?void 0:d.isComplete)||!1,onChange:function(e){return n=e.target.checked,void j((function(e){return b(b({},e),{},(0,a.Z)({},"isComplete",n))}));var n}})}),(0,r.jsx)(o.Wv,{style:{textAlign:"center"},children:(0,r.jsx)(o.zx,{raised:!0,onClick:function(){return p()},children:"Add row"})})]})})]})})})]})},C=function(){var e=(0,i.useRouter)(),n=(0,c.useState)(""),t=n[0],o=n[1];return(0,c.useEffect)((function(){var e;o((null===(e=window.localStorage)||void 0===e?void 0:e.getItem("userId"))||"")}),[e]),(0,r.jsx)(l,{children:(0,r.jsx)("div",{children:(0,r.jsx)(m,{userId:t})})})},S=function(){return(0,r.jsx)(C,{})}},1344:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/home",function(){return t(7553)}])},1497:function(){},1560:function(){},8697:function(){}},function(e){e.O(0,[300,724,24,482,774,888,179],(function(){return n=1344,e(e.s=n);var n}));var n=e.O();_N_E=n}]);